// Internal type definitions for @ebay/tracking-ebay 4.0
// Definitions by: Timur Manyanov <https://github.corp.ebay.com/tmanyanov>
// Definitions: https://github.corp.ebay.com/TypeScript/types-ebay
// TypeScript Version: 3.0

import { Request, Response } from 'express';

export interface PulsarEventTracker {
    setEventType(eventAction: any, eventFamily: any, version: any): void;
    setEventAction(action: any): void;
    setEventFamily(family: any): void;
    setEventVersion(version: any): void;
    addData(key: any, value: any): void;
    setEventFlag(key: any, value: any): void;
    flush(callback: any): void;
}
export interface TrackingContext {
    expSvcImpression?: string;
    instrumentResponse(): void;
    updateSojournerBookKeeping(): void;
    getRequestScopeTracker(options?: any): PulsarEventTracker;
    getPulsarEventTracker(options: any): any;
    getTaasContext(callback: (err: any, taasContext: any) => any): void;
    trackTag(tag: any, value: any): void;
    getCiid(): string;
    trackVectorTag(tag: any, value: any, vectorTypeEnum?: any): void;
    trackContextFlag(bit: any, value: any): void;
    trackFlag(bit: any, value?: any): void;
    trackSojournerFromSvc(eventEnum: any, sojournerFromSvc: any): void;
    isTrackingEnabled(): boolean;
    trackModuleImpression(moduleId: any): void;
    getSPTagValue(moduleId: any, linkId: any): any;
    track(): void;
    buildTrackingHeadersForRequest(): any;
    addTrackingHeadersForRequest(headers: any): any;
    handleResponseHeaders(headers: any): void;
}

export function generateSPTagValue(pageId: any, moduleId: any, linkId: any): string;

export namespace Tags {
    const sojMap: any[];

    function getTagByName(name: any): any;
    function newTag(codeName: any, sojournerName: any, dataType: any): any;
}

export namespace Flags {
    function getAppFlag(bit: any, pageId: any): any;
    function getContextFlag(bit: any): any;
    function newFlagSet(codeName: any, pageId: any): any;
    function reset(): void;
}

export namespace Modules {
    function getModuleById(id: any): any;
    function newModule(id: any, name: any): any;
}

export namespace SojournerEventEnum {
    interface SojournerEvent {
        name: any;
        value: any;
        toString(): any;
    }

    interface SojournerEvents {
        APPLICATION: SojournerEvent;
        CLICK: SojournerEvent;
        COOKIE: SojournerEvent;

        getEventByName(name: any): any;
    }
}

export namespace VectorTypeEnum {
    interface VectorType {
        type: any;
        prefix: any;
        toString(): any;
    }

    interface VectorTypes {
        NUMBER: VectorType;
        STRING: VectorType;

        getType(type: any): any;
    }
}

export function middleware(options?: any): (req: Request, res: Response, next: any) => any;

export function warmup(): any;

export function renderInlineTrackingCode(context: TrackingContext, taasContext: any, expSvcImpressId: any): void;

export function updateCookies(req: Request, res: Response, taasContext: any): boolean;

declare module '@ebay/commons-ebay' {
    interface EbayContext {
        tracking: TrackingContext;
    }
}
