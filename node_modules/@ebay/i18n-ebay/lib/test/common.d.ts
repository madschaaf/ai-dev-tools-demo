import ContentManager from "../ContentManager";

/**
 * Create an i18n ContentManager and bind the library to explicity use it.
 * When the i18n-ebay asks for a ContentManager internally, it will always
 * return the global one created here. This is particularly useful
 * in testing scenarios.
 */
export const bindGlobalContentManager: (opts?: {
  fromLocality?: {
    country: string;
    locale: string;
  };
}) => ContentManager;

type PreloadOptions = {
  /**
   * If a bundle is missing for a particular locale, rather than crash,
   * simply ignore and do not preload it. This can occur when a bundle is
   * present for some locales but not others. Such a scenario happens during
   * the development lifecycle of a project when new bundles are being actively
   * translated.
   */
  allowMissing?: boolean;
  bundleNames?: string[];
  locale?: string;
  localesDirname?: string;
};

/**
 * Given a content manager, allow users to request preloading of i18n bundles.
 */
export const createI18NBundlePreloader: (opts: {
  contentManager: ContentManager;
}) => (opts?: PreloadOptions) => Promise<{ contentManager: ContentManager }>;
