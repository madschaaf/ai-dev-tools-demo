'use strict';

const localeFormatter = require('@ebay/locale-formatter-ebay');
const Money = require('@ebay/common-types-ebay/money');

module.exports = function formatMoney(element, data, context) {
    if (!Money.isMoney(data)) {
        throw new Error(`value must be of common-types-ebay/money type, actual:${data}`);
    }

    const result = localeFormatter.formatMoney(data.doubleValue(),
        data.getCurrency().value.getCode(),
        context.locality && context.locality.locale,
        element.options);

    if (result.error) {
        throw new Error(result.error);
    }

    return result.format;
};
