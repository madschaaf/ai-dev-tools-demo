'use strict';

var svcClient = require('@ebay/service-client-ebay'),
    logger = require('@ebay/logging-inc').logger('@ebay/hostipchecker/service'),
    debug = require('debug')('authsvc:services');

function loadAuthIP(callback) {
    var st = Date.now();

    var authService = svcClient.context({}).getClient('authSvc');
    authService.get()
                .end(function (error, response) {
        debug('Auth service call completed in', Date.now() - st, 'ms');
        if (error || !response || !response.body) {
          logger.error('Authz Service is down');
          callback(error, null);
        } else {
          var authList = Buffer.isBuffer(response.body) ? response.body.toString('utf8') : response.body;
          return callback && callback(null, authList);
        }
    });
}

exports.loadAuthIP = loadAuthIP;
