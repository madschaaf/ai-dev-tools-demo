'use strict';

var ServiceContext;
var WebContext;

module.exports.getFactory = function getFactory(type) {
    return {
        create: function create(req, res, options) {
            if (type === 'service') {
                // lazy loading to avoid conflicts
                ServiceContext = ServiceContext || require('./service-context').ServiceContext;
                return new ServiceContext(req, res, options);
            }

            // lazy loading to avoid conflicts
            WebContext = WebContext || require('./web-context').WebContext;
            return new WebContext(req, res, options);
        }
    };
};
