# How to extend `@ebay/validate-internals-ebay` for component status with customized view
## Create ejs template and xslt template in module
1. [global_config.ejs](lib/vi/global_config.ejs)
2. [GlobalConfigStatus.xsl](lib/vi/GlobalConfigStatus.xsl)

## Register the xslt template to vi app
[globalConfig.js](lib/globalConfig.js#L173)
```javascript
const vi = require("@ebay/validate-internals-ebay");
vi.app.use('/v3console/resources/xsl/GlobalConfigStatus.xsl', function (req, res) {
  res.sendFile(path.join(__dirname, "vi", "GlobalConfigStatus.xsl"));
});
```

## Register the component status with own render
[globalConfig.js](lib/globalConfig.js#L187)
```javascript
// render for render the global config status vi view
function componentStatusRenderer(req, model, res) {
  const templateName = path.join(__dirname, './vi/global_config.ejs');
  // get the header template required by global_config
  const header = require.resolve("@ebay/validate-internals-ebay/lib/public/views/header.ejs");
  model = Object.assign({"viheader": header}, model);
  if (req.query.xpath) {
    res.type('xml').render(templateName, model, function (err, content) {
      if (err) {
        res.status(500).end('<error>' +
            err.stack +
            '</error>');
        return;
      }
      res.send(XPath.select(content, req.query.xpath));
    });
    return;
  }
  return res.type('xml').render(templateName, model);
}

function handler() {
  return {
    'name': COMPONENT_STATUS_NAME,
    'alias': COMPONENT_STATUS_NAME,
    'status': 'created',
    'properties': [Object.assign({"name": "Config Manifest"}, resolveManifestId()), ...Object.values(_cache)]
  };
}

logger.info("register the component status for global config");
vi.componentStatus.register(COMPONENT_STATUS_NAME, handler, componentStatusRenderer);
```

## How it works?
1. The VI accepts `renderer` function on register component status: https://github.corp.ebay.com/nodejs/validate-internals-ebay#component-status
2. The `render` function of `express.resp` accepts absolute path as the template name
3. The VI exported the express app, that we can register our own static resource like xsl with `app.use()`


