# patronus-client-ebay

A Node.js client for reading keys(Symmetric & Asymmetric) from Patronus(Key Management Service).

## Changelog

See [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/patronus-client-ebay/blob/master/CHANGELOG.md#changelog)

# Installation

`npm install @ebay/patronus-client-ebay --save`

# Usage

```javascript
    const { PatronusClient } = require('@ebay/patronus-client-ebay');

    const key = await PatronusClient.getPatronusKey('/someappname/path/to/key' or '2b414395-7a0a-4da5-bf8f-758488c3e2e7');
```

Legacy API in TypeScript:
```typescript
    import * as PatronusClient from '@ebay/patronus-client-ebay';

    PatronusClient.getAsymmetricKeyPair('/someappname/path/to/key', (err: Error, response: ResponseData) => {});
```

# API's

* ## `async getPatronusKey(keyPathOrKeyId)`

  This API fetches Secret key(Symmetric key/Private Key) from Patronus. Make sure to add '/' the start of path eg. /appname/folderpath/keyname
  
  ## Params: 
  * `keyPathOrKeyId`: Path to the key under appName or KeyId
  * `returns Object with `privateKey` if successful, else `err` object.

* ## `async getPatronusKey(channelName, version)`
  ## Params: 
  * `channelName`: channel name
  * `version`: channel version, optional, default -1 which is latest

* ## `async getAsymmetricKey(keyPathOrKeyId)`

  ## Params: 
  * `keyPathOrKeyId`: Path to the key under appName or KeyId
* ## `async getAsymmetricKey(channelName, version)`

  This API fetches Key Pair(Asymmetric key pair/Public-Private key pair) from Patronus.

  ## Params: 
  * `channelName`: channel name
  * `version`: channel version, optional, default -1 which is latest

## API to be deprecated

* ## `getAsymmetricKeyPair(keyPathOrKeyId, callback)`
* ## `getSymmetricKey(keyPathOrKeyId, callback)`
