'use strict';

var modConfig = require('@ebay/module-config-inc');

var serviceConfigCache = null;


function updateConfig(svcConfig) {
    if (!svcConfig) {
        return;
    }

    var configValue = svcConfig && svcConfig.get('services:kernelSvc');
    serviceConfigCache = configValue || serviceConfigCache;
}

function loadConfig(callback) {
    if (serviceConfigCache) {
        return callback(null, serviceConfigCache);
    }

    modConfig(module, function(err, config) {
        if (err) {
            return callback(err, null);
        }

        updateConfig(config);
        return callback(null, serviceConfigCache);
    });
}

module.exports = loadConfig;