const { ExtendedClient } = require('../transports/http-api');

class GQLClient extends ExtendedClient {
    constructor(pipe, config) {
        super(pipe, config);
    }

    query(query, variables = {}, options = {}, extensions) {
        return new Promise((resolve, reject) => {
            this.post({
                body: {
                    query,
                    variables,
                    extensions
                }
            })
                .options(options)
                .end((err, response) => {
                    if (err) {
                        return reject(err);
                    }
                    resolve(response);
                });
        });
    }
}

module.exports = GQLClient;
