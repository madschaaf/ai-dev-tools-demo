const extractFiles = require('extract-files');

function isExtractableFile(value) {
    return extractFiles.isExtractableFile(value) || isStream(value);
}

function isStream(stream) {
    return (
        // eslint-disable-next-line eqeqeq
        stream != null &&
        typeof stream === 'object' &&
        typeof stream.pipe === 'function'
    );
}

function checkMultipart(request) {
    return (
        request.headers &&
        request.headers['content-type'] === 'multipart/form-data'
    );
}

function isPlainObject(obj) {
    if (typeof obj !== 'object' || obj === null) return false;

    let proto = obj;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }

    return Object.getPrototypeOf(obj) === proto;
}

module.exports = {
    isExtractableFile,
    isPlainObject,
    checkMultipart
};
