"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.create = void 0;
const ServiceContext_1 = require("./ServiceContext");
const WebContext_1 = require("./WebContext");
/**
 * This middleware function adds the openfeature client with default provider (AAFF Provider)
 * and exposes to the application through the req.ebay.openfeature object.
 * openfeature-ebay can be used as a module import to achieve the same functionality through
 * the API class. However, future functionality related to pre-fetching feature flag metadata
 * will require using this middleware function.
 * @param req
 * @param res
 * @param config
 * @returns
 */
function create(req, res, openfeatureGlobalCache) {
    const context = req.ebay.isService
        ? new ServiceContext_1.ServiceContext(req, res, openfeatureGlobalCache)
        : new WebContext_1.WebContext(req, res, openfeatureGlobalCache);
    return context;
}
exports.create = create;
//# sourceMappingURL=index.js.map