import { EvaluationDetails, FlagValue, Hook, HookContext } from '@openfeature/js-sdk';
import { Context } from '../openfeature-context/Context';
import { DiagnosticsData } from '../types/DiagnosticsData';
import { FeatureFlagRawEvent } from '../types/FeatureFlagRawEvent';
/**
 * DiagnosticsHook is an implementation of the Hook interface that collects diagnostic data
 * during feature flag evaluations and publishes it to CAL (Common Application Logging).
 *
 * This hook is used for preparing the diagnostic data. It set the apiLogList in context with required values
 * from response based on flag evaluation and then publish to the CAL.
 * It uses @ebay/cal library and cal.createEvent method to create the log event.
 *
 * @param context - The context object containing API log list and other diagnostic information.
 */
export default class DiagnosticsHook implements Hook {
    context: Context;
    constructor(context: any);
    /**
     * Adds diagnostic data to the API log list if the feature flag key is not already present.
     *
     * @param hookContext - The context of the hook containing information about the feature flag evaluation.
     * @param evaluationDetails - The details of the flag evaluation, including metadata such as variant and reason.
     */
    addDataToApiLogList(hookContext: HookContext, evaluationDetails: EvaluationDetails<FlagValue>): void;
    /**
     * Flushes the diagnostics data to CAL (Common Application Logging).
     *
     * This method is called from middleware.ts when diagnostics data with ApiLogList is ready
     * and response is returned.
     */
    flushDiagnosticsDataToCal(): void;
    /**
     * Publishes diagnostic data to CAL by creating an event,
     * attaching the serialized diagnostics data, and completing the event.
     * event type and name can be changed based on requirements
     *
     * @param type - The type of the CAL event.
     * @param name - The name of the CAL event.
     * @param diagnosticsData - The diagnostics data to be published, which will be serialized to JSON.
     */
    publishDataToCal(eventType: String, eventName: String, diagnosticsData: DiagnosticsData): void;
    /**
     * Publishes feature_flag_data to CAL with captured error and exception span data from open-telemetry
     */
    publishWithRespCode(featureFlagRawEvents: FeatureFlagRawEvent[], respCode: number): void;
    /**
     * Called before the flag evaluation begins, adds the triggered feature flag key to flag list.
     * In case of any evaluation failures the only point which can capture the feature flag key is before evaluation.
     * @param hookContext
     */
    before(hookContext: HookContext): void;
    /**
     * Called after a flag evaluation has completed.
     * Adds diagnostic data to the API log list for publishing.
     *
     * @param hookContext - The context of the hook invocation, containing flag and evaluation metadata.
     * @param evaluationDetails - The details of the flag evaluation, including the evaluated value.
     */
    after(hookContext: HookContext, evaluationDetails: EvaluationDetails<FlagValue>): void;
    /**
     * Creates and returns a `DiagnosticsData` object populated with qualification input and platform data.
     *
     * @param context - The context object containing user and device information.
     * @returns A `DiagnosticsData` instance with populated qualification input and platform data.
     */
    createQualificationInput(context: Context): DiagnosticsData;
}
