import {
    EvaluationContext,
    Hook,
    HookContext,
    HookHints,
} from '@openfeature/js-sdk';

/**
 * A hook that is used to set the EvaluationContext with required values
 * from request before flag evaluation.
 */
export default class QualificationCriteriaHook implements Hook {
    before(hookContext: HookContext, hookHints: HookHints): EvaluationContext {
        const evalContext: EvaluationContext = hookContext.context;
        if (hookHints) {
            Object.entries(hookHints).forEach(([key, value]) => {
                if (typeof value === 'string' || typeof value === 'number') {
                    evalContext[key] = value;
                }
            });
        }

        return evalContext;
    }
}
