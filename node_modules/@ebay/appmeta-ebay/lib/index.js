'use strict';

var Assert = require('assert');
var loader = require('./loader');

exports.get = loader.getAppMeta;
exports.getAppMeta = loader.getAppMeta;
exports.getServiceMeta = loader.getServiceMeta;

exports.init = function (ctx, callback) {
    Assert.ok(ctx, 'Context is required');
    Assert.ok(ctx.appName, 'appName is required');
    Assert.ok(callback, 'callback is required');
    loader.getAppMeta(ctx.appName, callback);
};

exports.load = function (appName, skipAppSecret, callback) {
    Assert.ok(appName, 'appName is required');
    Assert.ok(typeof callback === 'function' || typeof skipAppSecret === 'function', 'callback is required');
    loader.getAppMeta(appName, skipAppSecret, callback);
};

exports.loadWithtoutAppSecret = function(appName, callback) {
    exports.load(appName, true, callback);
};

exports.$internals = {
    reset: loader.reset
};