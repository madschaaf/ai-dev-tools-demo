# appmeta-ebay 

[![Build Status](https://ci.altus.vip.ebay.com/ebaykrakn-4389/buildStatus/icon?job=appmeta-ebay)](https://ci.altus.vip.ebay.com/ebaykrakn-4389/job/appmeta-ebay) [![Dependency Status](https://appvalidator.vip.qa.ebay.com/nodejs/appmeta-ebay.svg)](https://appvalidator.vip.qa.ebay.com/nodejs/appmeta-ebay)
[![Code Coverage](https://badgeme.vip.qa.ebay.com/badge/sonar/v0/coverage/appmeta-ebay)](http://sonar/dashboard/index?id=appmeta-ebay)


This module allows you to load application metadata based on current environment (currently NODE_ENV = qa|pre-production|production).

## Changelog

See   [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/appmeta-ebay/blob/master/CHANGELOG.md#changelog)

## Installation


Install with [npm](http://github.com/isaacs/npm):

```  
  npm install appmeta-ebay --save
```


## Usage
### This module is called by `@ebay/commons-ebay` module
You can use [`req.ebay.appMeta`](https://github.paypal.com/nodejs/commons-ebay#application-related) to get the metadata of application.
```javascript
req.ebay.appMeta();
```

### Basic Usage

#### App metadata
``` javascript
require("@ebay/appmeta-ebay").getAppMeta(appName, function (error, meta) {
    console.log(meta.getConsumerId());
});
```

#### The returned meta Object has the following methods:
- **getPageId(pageName)** - returns pageId given the pageName
- **getPageMeta(pageName)** - returns pageMeta Object given the pageName
- **needIAFToken(pageName)** - returns boolean value given the pageName
- **getConsumerId()** - returns consumer Id
- **getAppSecret()** - returns application's secret
- **getEbayAppId()** - returns ebay App Id
- **getEbayCertId()** - returns ebay Cert Id
- **getEbayDevId()** - returns ebay Dev Id
- **isSecretEncodedOnly()** - returns boolen value

####NOTE:

appName is optional. If not provided, the app name will be read from the "ebay.appName" property in the application's package.json file.


### Example on how to get page id

``` javascript
require("@ebay/appmeta-ebay").getAppMeta('sherlock', function ( error, meta ) {
    if(meta) {
        var pageId = meta.getPageId('SearchPage')
        console.log('pageId: ' + pageId);
    }
} );
```

## Related Module

* Using [appmeta-register-ebay](https://github.corp.ebay.com/nodejs/appmeta-register-ebay) module to update registration when there is changes like adding pages
