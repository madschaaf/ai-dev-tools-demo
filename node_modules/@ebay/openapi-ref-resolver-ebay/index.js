/* eslint-disable no-param-reassign */
module.exports = schemaRef => {
    if (/^[a-zA-Z]\:/.test(schemaRef)) {
        // we got a windows absolute path, having a drive letter followed by a colon (:)
        // this problem is caused by a bug on the [json-schema-ref-parser] npm library when running under Windows.
        schemaRef = schemaRef.substring(2);
    }

    if (/^\/[^\/]+\.(json|yaml)/.test(schemaRef)) {
        // then update to absolute path
        const schemaName = schemaRef.split('/')[1];
        const moduleName = schemaName.split('.').shift();
        schemaRef = `@ebay/${moduleName}-ebay${schemaRef}`;
    }
    return schemaRef;
};
