# ChangeLog

## v5.0.0
* TS-432: Hard deprecation of module, removed epsvc service call and always publish error message to remove module.

## v4.10.0
* EXPRMT-16845: Soft deprecation of module with dynamic warning/error and option to enable epsvc call

## v4.8.3
* NODE-4473: Added KeepAlive for EP Service

## v4.8.1
* EXPRMT-16121 security fix - mask cookie value in CAL log

## v4.7.1
* EXPRMT-14017 filter not used tags that exceed tracking limit: qt, qc, uqt, uqc

## v4.6.0
* TSDEV-5835 Add utils common code

## v4.5.0
* TSDEV-5837 node support for traffic source

## v4.4.1
* Fix: service flow crashes when response is already sent while ep instrument in service-client-ebay tries to set response headers with ep results.

## v4.4.0
* Support for client side experiments. This feature enables mweb and dweb apps to run simple client side experiments without making code changes in the source code(treatment will be injected via script)

## v4.3.2
* Added: Enable or disable EP per route

## v4.3.1
* Fixed deprecation message

## v4.3.0
* Switch from short vip to long vip

## v4.2.0
* (Exprmt 9488) - Support usersegment value from reading cookies
* For related error in COS service, see wiki page: https://wiki.vip.corp.ebay.com/pages/viewpage.action?pageId=643760800

## v4.1.1
* Removed explicitly defined discovery instrument

## v4.1.0
* Implementented: ep should allow to control no ep response header to avoid MAX header exception, https://jirap.corp.ebay.com/browse/NODE-2032

## v4.0.9
* Added urn for service-discovery

## v4.0.8
* Fixed security issue with logging cookies in debug mode, https://jirap.corp.ebay.com/browse/NODE-1771

## v4.0.7
* Fix: Added `COUNTRYCODE` to EP Context Params
https://jirap.corp.ebay.com/browse/NODE-1690

## v4.0.6
* Fix: Added ChannelId(2) for browser accessing on Tablets(iPad/Andriod) https://jirap.corp.ebay.com/browse/NODE-1541

## v4.0.5
* Fix: X-EBAY-X-EXP HTTP header should not be sent to services, if expt cookie value is -1

## v4.0.4
* Fix: experimentaition-ebay causes app worker to restart due to uncaught error due to missing tracking flags, https://jirap.corp.ebay.com/browse/NODE-1332

## v4.0.3
* NODE-1315: Pass SITEID in contextual parameter to enable GEO experiments

## v4.0.2
* Corrected debug logging to avoid NPE when req.ebay.requestUrl is bad.

## v4.0.1
* When channel id cannot be determined it should be defaulted to 99

## v4.0.0
* Remove peer and unwanted dependencies and upgrade dependencies

## v2.0.4
* Send isBot flag in additional parameter to EP service so it can inclue/exclude bots from experiment

## v2.0.3
* EP: losing new guid in AB experimentation for non-signed in users

## v2.0.2
* Lookup optin cookielet header in experience service headers using lowercase when not found fallback to uppercase.

## v2.0.1
* Added b-rlogid header to the response to allow easy tracing of target box from a-pool box.
* Now you can find it in response header under the name 'b-rlogid' while 'rlogid' will point ot a-pool

## v2.0.1
*  Fix: FSOM preferece of user is computed from EndUserContext.

## v2.0.1
*  Populate default system context of EP request

## v2.0.0
* Complete a/b pool support

## v1.0.2
* Added `force-retry` to `true`
* Decreased `socketTimeout` to `200ms` as per production 95 %ile

## v1.0.1
* Should not provide bad context when service response is bad (404), should provide error instead.

## v1.0.0
* Enhancement: Any ID experimentations

## v0.2.20
* Enhancement: Adding new header Channel for EP Request headers. [https://jirap.corp.ebay.com/browse/NODE-259](https://jirap.corp.ebay.com/browse/NODE-259)

## v0.2.19
* Fixed: Generating `X-EBAY-C-EXP` Header Multi Value.

## v0.2.18
* Enhancement: Defaulted EP Instrumentation to EP Qualified Results

## v0.2.17
* Enhancement: Added instrumentation for Experience Service Headers

## v0.2.16
* Switched environment-inc to environment-ebay

## v0.2.15
Enhancement: Supported config to send global params
Fixed: Instrumentation for `X-EBAY-EP-SVC` added
Fixed: To Send `END-USER-CTX` headers


## v0.2.14
Fixed: Switched to `@ebay/service-client-ebay` to have capabilities on configbean, markup, markdown features.


## v0.2.13 
