'use strict';

module.exports = function routerFactory() {
    return function router(req, res, next) {
        if (req.route) {
            const codegenCtx = req.route.spec['x-ebay-codegen-resource'];
            const meta = codegenCtx && codegenCtx.meta;
            const pageName = meta && meta.pageName || req.route.name;
            const expSvcRequest = meta && meta.parameters.expSvcRequest;
            const moduleProviderRequest = meta && meta.parameters.moduleProviderRequest;
            req.route = Object.assign({
                config: {
                    pageName,
                    expSvcRequest,
                    moduleProviderRequest,
                    path: req.route.path
                }
            }, req.route);
        }

        next();
    };
};
