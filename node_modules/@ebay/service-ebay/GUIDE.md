# Building Service APIs at eBay with Node.js and Swagger

### Learning Resources

Services

- [Commerce OS API Design Standards](http://cos/standardsroadmap)

Swaggerize Tools

- [generator-swaggerize](https://github.com/krakenjs/generator-swaggerize)
- [swaggerize-hapi](https://github.com/krakenjs/swaggerize-hapi)
- [swaggerize-express](https://github.com/krakenjs/swaggerize-express)

# Quick Start Guide

Use `generator-swaggerize` and `@ebay/service-ebay` to create a sample PPaaS API.

### Stub Service

Install `yo` and `generator-swaggerize`.

```bash
$ npm install -g yo
$ npm install -g generator-swaggerize
$ yo swaggerize-ebay
```

Follow the instructions:

- Choose a name (petstore in this example).
- Enter github/email details.
- Choose `express` at the framework prompt.
- Use the following URL at the api prompt: https://github.paypal.com/trlivingston/typhon/raw/master/test/fixtures/config/pets.json

You will now have a working express/swagger project, which consists of hosting app and application service module.
The main development will be done in application service module. The module can be versioned and published to npm.corp.ebay.com
The hosting app can host multiple versions of the service module.

### Bootstrap for eBay

Create a `config.json` under the `config` directory containing the following:

```json
{
    "applications": [
        {
            "name": "service1",
            "base-path": "/svc/v1",
            "path": "path:./svc1"
        },
        {
            "name": "service2",
            "base-path": "/svc/v2",
            "module": "path:./svc2"
        }
    ]
}
```
<app>-v1 is application service module

Install `@ebay/service-ebay`.

```bash
$ npm install --save service-ebay
```

Modify the `index.js or server.js` to look more like the following:

```javascript
'use strict';

var express = require('express');
var bodyParser = require('body-parser');
var service = require('@ebay/service-ebay');

var st = Date.now();
var app = express();

app.use(bodyParser.json());

app.use(service());
app.on('start', function () {
    console.log('server is ready - ' + (Date.now() - st)/1000 + ' seconds');
});
app.listen(8082);
```

### Test

Test by making requests against the API paths.
