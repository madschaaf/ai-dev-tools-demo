'use strict';
const chomskyRequest = require('../../chomskyRequest');

/**  
 * @typedef {import("openai").CreateChatCompletionRequest} CreateChatCompletionRequest  
 * @typedef {import("openai").CreateChatCompletionResponse} CreateChatCompletionResponse  
 */

/**
*
* @summary Creates a completion for the chat message
* @param {CreateChatCompletionRequest} createChatCompletionRequest
* @param {*} [options] Override http request option.
* @throws {RequiredError}
* @returns {Promise<CreateChatCompletionResponse>}
*/
async function createChatCompletion(createChatCompletionRequest, options) {
    // Sanitize the request object
    const {
        model,
        messages,
        temperature,
        top_p,
        n,
        stream,
        stop,
        max_tokens,
        max_completion_tokens,
        presence_penalty,
        frequency_penalty,
        logit_bias,
        user,
        functions,
        function_call,
        logprobs,
        top_logprobs,
        response_format,
        seed,
        reasoning_effort,
        reasoning,
        verbosity,
        tools,
        tool_choice,
        tracingEntityId,
        tracingEntityType,
    } = createChatCompletionRequest;
    return chomskyRequest.openaiRequest(
        '_openai_chat_completion',
        {
            model,
            messages,
            temperature,
            top_p,
            n,
            stream,
            stop,
            max_tokens,
            max_completion_tokens,
            presence_penalty,
            frequency_penalty,
            logit_bias,
            user,
            functions,
            function_call,
            logprobs,
            top_logprobs,
            response_format,
            seed,
            reasoning_effort,
            reasoning,
            verbosity,
            tools,
            tool_choice,
            tracingEntityId,
            tracingEntityType,
        },
        options
    );
}

module.exports = createChatCompletion;