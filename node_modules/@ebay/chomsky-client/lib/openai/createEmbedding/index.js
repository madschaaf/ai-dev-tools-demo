'use strict';
const chomskyRequest = require('../../chomskyRequest');

/**  
 * @typedef {import("openai").CreateEmbeddingRequest} CreateEmbeddingRequest  
 * @typedef {import("openai").CreateEmbeddingResponse} CreateEmbeddingResponse  
 */

/**
 *
 * @summary Creates an embedding vector representing the input text.
 * @param {CreateEmbeddingRequest} createEmbeddingRequest
 * @param {*} [options] Override http request option.
 * @throws {RequiredError}
 * @returns {Promise<CreateEmbeddingResponse>}
 */
async function createEmbedding(createEmbeddingRequest, options) {
    // Sanitize the request object
    const { model, input, tracingEntityId, tracingEntityType, user } = createEmbeddingRequest;

    return chomskyRequest.openaiRequest(
        '_openai_embedding',
        { model, input, tracingEntityId, tracingEntityType, user },
        options
    );
}

module.exports = createEmbedding;
