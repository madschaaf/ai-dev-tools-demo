'use strict';
const chomskyRequest = require('../../chomskyRequest');

/**  
 * @typedef {import("openai").CreateCompletionRequest} CreateCompletionRequest  
 * @typedef {import("openai").CreateCompletionResponse} CreateCompletionResponse  
 */

/**
 *
 * @summary Creates a completion for the provided prompt and parameters
 * @param {CreateCompletionRequest} createCompletionRequest
 * @param {*} [options] Override http request option.
 * @throws {RequiredError}
  * @returns {Promise<CreateCompletionResponse>}
*/
async function createCompletion(createCompletionRequest, options) {
    // Sanitize the request object
    const {
        model,
        prompt,
        suffix,
        max_tokens,
        temperature,
        top_p,
        n,
        stream,
        logprobs,
        echo,
        stop,
        presence_penalty,
        frequency_penalty,
        best_of,
        logit_bias,
        tracingEntityId,
        tracingEntityType,
        user
    } = createCompletionRequest;
    return chomskyRequest.openaiRequest(
        '_openai_completion',
        {
            model,
            prompt,
            suffix,
            max_tokens,
            temperature,
            top_p,
            n,
            stream,
            logprobs,
            echo,
            stop,
            presence_penalty,
            frequency_penalty,
            best_of,
            logit_bias,
            tracingEntityId,
            tracingEntityType,
            user
        },
        options
    );
}

module.exports = createCompletion;