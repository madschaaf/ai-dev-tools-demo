# ChangeLog

## v4.8.6
* Fix: esams-consumer-ebay does not retain return channel version for keyPair holder, https://jirap.corp.ebay.com/browse/NODE-5280

## v4.8.5
* Fix: JWE validation fails due to invalid pksc8 format, https://jirap.corp.ebay.com/browse/NODE-5215

## v4.8.4
* Added missing authTagLen to secret key holder, https://jirap.corp.ebay.com/browse/NODE-4396
* Corrected expiration message to use key version instead of parameter value

## v4.8.0
* Added: Enable LocalDebug staging mode in esams, https://jirap.corp.ebay.com/browse/NODE-3923

## v4.7.0
* Added: Typescript support for esams-consumer-ebay module, https://jirap.corp.ebay.com/browse/NODE-3684

## v4.6.4
* Fix: jest failure in getEsamsConsumer, https://jirap.corp.ebay.com/browse/NODE-3847

## v4.6.3
* Fix: esams node:crypto has sone issues when running in jest, https://jirap.corp.ebay.com/browse/NODE-3842

## v4.6.1
* Fidelius call getNonKeyValue fails due to missing esams header, https://jirap.corp.ebay.com/browse/NODE-3791

## v4.6.0

* Ported Raptor NameService API to this module, https://jirap.corp.ebay.com/browse/NODE-3188
* Deprecated existing esams interface in favor of NameService
* Provided config bean control to swtich back to legacy esams in case of issues
* Tests now run in new and legacy mode to make sure backwards compatibility
* Details:
    * The existing code was moved or not touched at all
    * index with EsamsClient and getEsamsConsumer have been moved to legacy-esams-consumer.js
    * new esams-client has been created that replaces existing EsamsClient defined in legacy-esams-consumer.js in new mode
    * config.js allows to switch between new and legacy mode, by default it is a new mode
    * existing caching logic is replaced in new mode and compatible with raptor logic 
    * The files to be eventually removed
        * cache.js
        * legacy-esams-consumer.js
        * service.js

## v4.5.0
* Increased cache timeout to 24hrs

## v4.4.0
* Integrated with `getSecretKey` API with `patronus-client-ebay` with whitelist flag
https://jirap.corp.ebay.com/browse/NODE-2322

## v4.3.2
* Removed explicitly defined discovery instrument

## v4.3.1
* Added urn for service-discovery

## v4.3.0
* Added: Fidelius client is integrated for `nonKey` API based in whitelist apps.
https://jirap.corp.ebay.com/browse/NODE-1645

## v4.2.3
* Fixed: Added sandbox configuration

## v4.2.1
* Added an additional helper method to acquire identity file contents.

## v4.2.0
* Switched eSAMS host name to `esams-secure.vip.ebay.com` for TLS1.2

## v4.0.3
* Disabled COS 2.0 xff header as esams service does not support it and fails with authentication problem because of incorrect IP address.

## v4.0.2
* Allowed for staging to use mock data with special env flag FORCE_MOCK_INDETIFY_FILE that can be set only in CI to prevent CI failures during provisioning

## v4.0.1
* Ensure stale channel vaules are not returned for latest key requests

## v4.0.0
* Remove peer and unwanted dependencies and upgrade dependencies

## 0.1.15
* Moved pll eerDependencies into direct

## v0.1.14
* Added test environment for the default identity file

## v0.1.13
* added "rejectUnauthorized": false since we not yet using local certificate validation

## v0.1.12
* Added `getCertificate`, `getKeyPair` operations.
* Added `removeFromCache` method on EsamsConsumer to remove specific channel from cache.
* Improve resiliency: All opertations return result from cache and schedule refresh when latest key is requested and it has been more than an hour since the last cache refresh.

## v0.1.11
* Added `force-retry` `true` as this is `POST` request

## v0.1.10
* Replaced commons-ebay with app-context-ebay

## v0.1.9
* Fixed: should not crash if secret key is missing, https://github.corp.ebay.com/nodejs/esams-consumer-ebay/issues/9
* updated readme file with valid link

## v0.1.8
* Replacing environment-inc with environment-ebay.

## v0.1.7
* Corrected service endpoint settings, they were ignored before, including timeout and dnslookup.

## 0.1.6
* Reduced timeout to 1000ms and retry set to 1.
