'use strict';

const modConfig = require('@ebay/module-config-inc');

// Lazy load config, but meanwhile read prod values and use them till config is loaded
const NameServiceConfig = {
    getConfig() {
        if (!this.config) {
            modConfig(__dirname, (err, config) => {
                this.config = config.get('name-service');
                config.on('change', () => {
                    this.config = config.get('name-service');
                });
            });
        }
        this.config = this.config || require('../config/config.json')['name-service'];
        return this.config;
    },

    getClockDiscrepancy() {
        return this.getConfig().clockDiscrepancy;
    },

    isLegacyEsamsRequested() {
        return this.getConfig().legacyEsams;
    }
};

module.exports = {
    NameServiceConfig
};
