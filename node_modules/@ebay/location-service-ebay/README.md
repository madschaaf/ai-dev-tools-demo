# location-service-ebay 

[![Build Status](https://ci.altus.vip.ebay.com/ebaykrakn-4389/buildStatus/icon?job=location-service-ebay)](https://ci.altus.vip.ebay.com/ebaykrakn-4389/job/location-service-ebay) [![Dependency Status](https://appvalidator.vip.qa.ebay.com/nodejs/location-service-ebay.svg)](https://appvalidator.vip.qa.ebay.com/nodejs/location-service-ebay)
[![Code Coverage](https://badgeme.vip.qa.ebay.com/badge/sonar/v0/coverage/location-service-ebay)](http://sonar/dashboard/index?id=location-service-ebay)

Client for commons location based services.

## Changelog

See   [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/location-service-ebay/blob/master/CHANGELOG.md#changelog)

## LocationByIP

API takes IP Address as input and gives a json String as output

https://wiki.vip.corp.ebay.com/display/Personalization/Client+Usage+Document#ClientUsageDocument-3.3IPAddressBasedlook-upforlatitude,longitudeandpostalcodes(andothereBayspecificdata)

### API

 - getLocationByIp(ip, headers, callback)
    - ip - valid IP address (string)
    - headers - optional headers to the location service (Object)
    - callback - callback function

### How to Use

```javascript
    var location = require('@ebay/location-service-ebay');

    ...
    var ip = '<some ip>';
    location.getLocationByIp(ip, null, function (err, result) {

        ...
    });
```

The callback result look something like

```
{
    "isoCountryCode2": "US",
    "postalCode": "95112",
    "stateCode": "CA",
    "city": "San Jose",
    "longitude": 78.440367,
    "latitude": 17.421608
}
```

## LocationByPostalCode

API for Zip based Location service that fetches the latitude and longitude for the zip centroid and other place related information.

https://wiki.vip.corp.ebay.com/display/Personalization/Client+Usage+Document#ClientUsageDocument-4.1PostalCodeandcountrycodeBasedlookup(ForwardGeocoding)

### API

 - getLocationByPostalCode(params, headers, callback)
    - params - Object with `isoCountryCode2` and `postalCode`.
    - headers - optional headers to the location service (Object)
    - callback - callback function

### How to Use

```javascript
    var location = require('@ebay/location-service-ebay');

    ...
    var params = {
        isoCountryCode2: 'US',
        postalCode: 94086
    };
    location.getLocationByPostalCode(params, null, function (err, result) {

        ...
    });
```

The callback result look something like

```
{
    "state": "California",
    "stateCode": "CA",
    "city": "San Jose",
    "longitude": -121.958388,
    "latitude": 37.434647
}
```
