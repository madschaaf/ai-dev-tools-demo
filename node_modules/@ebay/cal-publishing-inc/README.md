# cal-publishing-inc

[![Build Status](https://go/-/nodejsci/job/nodejs/job/cal-publishing-inc/job/master/badge/icon)](https://go/-/nodejsci/job/nodejs/job/cal-publishing-inc/job/master/) [![Dependency Status](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/cal-publishing-inc.svg)](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/cal-publishing-inc)  [![Code Coverage](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/coverage/nodejs/cal-publishing-inc)](http://sonar/dashboard/index?id=cal-publishing-inc)


The module provides a set of publishers/appenders that can be hooked to CAL publishing channel via configuration depending on where one wants CAL events to be published (cal, file, console, custom).

You can filter out messages based on log level. Possible levels: debug, info, warn, transaction, error, fatal.

The appenders as console, log4js are already preconfigured, but you can change/disable them or add your own.
For those that are preconfigured please take a look at [config](https://github.corp.ebay.com/nodejs/cal-publishing-inc/blob/master/config/config.json)

## Changelog

See   [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/cal-publishing-inc/blob/master/CHANGELOG.md#changelog)

## Configuration

```json
{
    "cal-publishing-inc": {
        "appenders": {
            "console": { 
                "module": "./appenders/console",
                "config": {
                    "color": true|false,    // enables colors in console output
                },
                "loglevel": {
                    "warn": "app1*" // output into console only app logging events of warn and higher types
                }
            },
            "log4js": {
                "module": "./appenders/log4js",
                "config": {
                    "appenders": {
                        "logfile": {
                            "type": "file", 
                            "filename": "pid:logs/log-{pid}.log" // log into file with 
                                                                 // name that contains process pid
                        }
                    },
                    "categories": {
                        "default": {
                            "appenders": [
                                "logfile"
                            ], 
                            "level": "error"
                        }
                    }
                }
            },
            "my-appender": {
                "module": "my-module-appender",
                "config": {
                    "my-config": "value",
                    // ...
                }
            }
        }
    }
}
```

## Examples

Configuration to show only errors and fatals in console output hiding everything else like debug, info, warn.
 
Put the following into `config.json` .
```
"cal-publishing-inc": {
        "appenders": {
            "console": {
                "module": "./appenders/console",
                "config": {
                    "color": true

                },
                "loglevel": {
                    "error": "*"
                }
            }
        }
    }
```

Configuration to log all messages debug and higher in development mode.

Put the following into `config/development.json` .
```
"cal-publishing-inc": {
        "appenders": {
            "console": {
                "loglevel": {
                    "debug": "*"
                }
            }
        }
    }
```
