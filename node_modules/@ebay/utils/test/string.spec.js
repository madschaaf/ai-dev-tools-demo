const Assert = require('assert');
const { string } = require('../utils');
const { cleanString, toCamelCase } = string;

describe('String utilities', () => {
    describe('cleanString', () => {
        it('should strip the provided string of the matched pattern', () => {
            Assert.equal(cleanString('test.vip.com', /.vip/g), 'test.com');
        });

        it('should strip the provided string of the matched pattern for multiple occurrences', () => {
            Assert.equal(cleanString('test.vip.com?redirect=test2.vip.com', /.vip/g), 'test.com?redirect=test2.com');
        });

        it('should return the original string param value, if it is null or undefined', () => {
            Assert.equal(cleanString(null, /.vip/g), null);
            Assert.equal(cleanString(undefined, /.vip/g), undefined);
        });

        it('should throw a type error if the pattern param is not instanceof RegExp', () => {
            Assert.throws(() => {
                cleanString('test.vip', '.vip');
            }, {
                name: 'TypeError',
                message: '@param: pattern - must be instanceof {RegExp}'
            });
        });
    });

    describe('toCamelCase', () => {
        it('should convert hello_world to helloWorld', () => {
            Assert.equal(toCamelCase('hello_world'), 'helloWorld');
        });

        it('should convert hello_World to helloWorld', () => {
            Assert.equal(toCamelCase('hello_World'), 'helloWorld');
        });

        it('should do nothing with helloWorld', () => {
            Assert.equal(toCamelCase('helloWorld'), 'helloWorld');
        });

        it('should work with multiple underscores', () => {
            Assert.equal(toCamelCase('token_expires_in'), 'tokenExpiresIn');
        });
    });
});