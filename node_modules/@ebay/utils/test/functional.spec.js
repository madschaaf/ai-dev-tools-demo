const assert = require('assert');
const { functional } = require('../utils');
const { curry } = functional;

describe('Functional utilities', () => {
    describe('curry', () => {
        it('should curry binary functions', () => {
            // returns true if all arguments are truthy.
            const binaryf = (a, b) => (a && b);

            // curry the binary function into a unary one, with a truthy first argument
            const unaryf = curry(binaryf, true);

            assert(typeof unaryf === 'function');
            assert(unaryf(true));
            assert(unaryf(false) === false);
        });

        it('should curry ternary functions', () => {
            // returns true if all arguments are truthy.
            const ternaryf = (a, b, c) => (a && b && c);

            // curry the ternary function into a binary one, with a truthy first argument.
            const binaryf = curry(ternaryf, true);

            assert(typeof binaryf === 'function');
            assert(binaryf(true, true));
            assert(binaryf(true, false) === false);

            // curry ternary function into a unary one, with truthy first and second arguments.
            const unaryf = curry(ternaryf, true, true);
            assert(typeof unaryf === 'function');
            assert(unaryf(true));
            assert(unaryf(false) === false);
        });

        it('should curry functions that take variable number of arguments', () => {
            const variablef = (...args) => args.reduce((acc, curr) => acc && curr, true);

            assert(typeof curry(variablef, true) === 'function');
            assert(typeof curry(variablef, true, true) === 'function');
            assert(typeof curry(variablef, true, true, true) === 'function');

            assert(curry(variablef, true)(true, true, true));
            assert(curry(variablef, true)(false, true, true) === false);
            assert(curry(variablef, true, true)(true, true));
            assert(curry(variablef, true, true, true)(true));

            assert(curry(variablef, true, true, true)(true));
            assert(curry(variablef, true, true, true)(true, true, true, true, true));
            assert(curry(variablef, true, false, true)(true, true, true, true, true) === false);
        });
    });
});