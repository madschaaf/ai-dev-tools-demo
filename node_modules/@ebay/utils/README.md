# Wonderland: Node Util
A library of available utils to help facilitate DRY within Vehicles Node applications.

## Install

#### Install current beta version

```sh
$ npm i -D @ebay/utils@next
```

#### Install latest stable version

```sh
$ npm i -D @ebay/utils@latest
```

## Usage

Include:

```js
const util = require('@ebay/utils');
```

Basic example:

```js
// Example demonstrates usage of `object.getValue` utility
const util = require('@ebay/utils');

const obj = { a: 1, b: 2 c: { d: 3 } };

const d = util.object.getValue(obj, 'c.d'); // => 3
```

Basic example with direct utility reference:
```js
// Demonstrates usage of `object.getValue` utility
const { getValue } = require('@ebay/utils/object');

const obj = { a: 1, b: 2 c: { d: 3 } };

const d = getValue(obj, 'c.d'); // => 3
```

## Utils
#### Objects
**`camelCaseKeys`**

| Params           | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| originalObject   | `Object` 				 | Object to apply the camel case conversion.                                   |

**@returns**: `{Object} resulting object with camel cased keys`

Example usage:
```js
const { camelCaseKeys } = require('@ebay/utils/object');

const obj = {
    token_expires_in: 10000
};

const camelCasedKey = camelCaseKeys(obj);

// @returns: { tokenExpiresIn: 10000 };
```

--

**`filterKeys`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| listOfKeys   | `Array` 				 | Keys to filter by                                                                |
| originalObject   | `Object` 				 | Object to apply filter to                                                    |

**@returns**: `{Object} esulting object from filter`

Example usage:
```js
const { filterKeys } = require('@ebay/utils/object');

const obj = { a: 1, b: 2, c: 3};

filterKeys([a, c])(obj);

// @returns: { a: 1, c: 3 };
```

--

**`getValue`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| obj              | `Object` 				 | Object to evaluate for existing properties and values                        |
| path             | `String` 				 | Object path to the property value desired                                    |
| defaultValue     | `Any` 			    	 | [optional] Default value to return if value is not present                   |

**@returns**: `{Any} The value of the specifed object property`

_returns **null** or **defaultValue** where value requested is not defined_


Example usage:
```js
const { getValue } = require('@ebay/utils/object');

const obj = { a: 1, b: 2, c: { foo: 'bar' }};

getValue(obj, 'c.foo');

// @returns: 'bar'

getValue(obj, 'c.baz', 'default');

// @returns: 'default'

const anotherObj = { values: [ { id: 1 }, { id: 2 } ] };

getValue(anotherObj, 'values[0].id');

// @returns: 1
```

#### Strings
**`cleanString`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| string              | `String` 				 | The string to clean                        |
| pattern              | `RegExp` 				 | The pattern to search for                        |

**@returns**: `{String} The cleaned string`

Example usage:
```js
const { cleanString } = require('@ebay/utils/string');

const str = 'test.vip';

cleanString(str, /.vip/g); // => test
```

**`toCamelCase`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| initalString              | `String` 				 | The string you'd like to convert                        |

**@returns**: `{String} the camel cased result`

Example usage:
```js
const { toCamelCase } = require('@ebay/utils/string');

const str = 'a_string';

toCamelCase(str); // => aString
```

#### Functional
**`curry`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| func             | `Function`				 | The function you want to curry                                               |
| first            | `Objects`				 | The first set of arguments you want to curried in                            |

**@returns**: `{function} the curried function`

Example usage:
```js
const { curry } = require('@ebay/utils/functional');

function ternaryf(a, b, c) {
    // logic using a, b and c
}

const valueA = 'first value'
const valueB = 2

const unaryf = curry(ternaryf, valueA, valueB); // curry in the first two arguments to the ternary function

unaryf('c'); // use this as a unary function
```

#### Promises
**`resolveNestedPromises`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| obj              | `Object`				 | The JSON object with nested promises                                         |

**@returns**: `{Object} the resolved JSON object`

Example usage:
```js
const { resolveNestedPromises } = require('@ebay/utils/promises');

const objectWithPromises = {
    first: Promise.resolve('first-value');
    next: {
        second: Promise.resolve('second-value')
    }
};

resolveNestedPromises(objectWithPromises).then(resolvedObject => {
    // resolvedObject = { first: 'first-value', next: { second: 'second-value' } }
    // do something with resolved object.
});

```

**`resolveWithFallback`**

| Param name       | Param type              | Description                                                                  |
| ---------------- | ----------------------- | -----------------------------------------------------------------------------|
| thenable              | `Promise`				 | The promise you want to catch any errors and return a fall back value for                                         |
| fallbackValue              | `any`				 | The fallback value                                      |

**@returns**: `{Promise<any>}` the fallback value wrapped in a promise

Example usage:

```js
const { resolveWithFallback } = require('@ebay/utils/promises');

const promiseWithError = new Promise((_, reject) => reject(new Error()));

const value = await resolveWithFallback(promiseWithError, 'default value');
// value === 'default value'

```

Another example:

```js
const firstPromise = Promise.resolve({ first: 'value' });
const secondPromise = Promise.reject({ error: 'Ignorable error!' })
const [first, second] = await Promise.all(
                [
                    firstPromise,
                    resolveWithFallback(secondPromise, { default: 'value' })
                ]
            );

// first is { first: 'value'}, second is { default: 'value' }; no error is thrown.
```