import { expectType } from 'tsd';
import * as vi from '.';
import { Request, Response } from 'express';

vi.register('Component Status Sync', () => {
    return 'status';
});

vi.register('Component Status Async', cb => {
    cb('status');
}, undefined, true);

vi.register('Component Status With Renderer', cb => {
    cb('status');
}, (req: Request, status: any, res: Response) => {
    res.end(status);
});

vi.componentStatus.handler(status => {
    console.log(status);
});

vi.componentStatus.getStatus('Component.Status.Async', status => {
    console.log(status);
});

const status = vi.componentStatus.getStatus('Component.Status.Sync');

const componentNames = vi.componentStatus.getComponents();

vi.componentStatus.register('Component Status Sync', () => {
    return 'status';
});

expectType<boolean>(vi.componentStatus.isStatusAsync('comp'));